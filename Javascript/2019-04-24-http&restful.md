

# HTTP & RESTful Architecture



## 1. HTTP (Hypertext Transfer Protocol)

HTTP 란 문서를 전송하기 위한 프로토콜(규약)이다.

| 속성 | 설명 |
| ------------------- | ------------------------------------------------------------ |
| 무상태성(Stateless) | 상태정보가 저장되지 않음. 즉, 요청 사이에는 연결고리가 없음.  때문에 클라이언트가 서버와 상호작용하기 위해서 HTTP `쿠키`를 만들고, 상태가 있는 `세션`을 활용할 수 있도록 보완 |
| 무연결성(Connectless)| 서버에 요청을 하고 응답을 한 이후에 연결은 끊어진다. |



### 1-1. URL (Uniform Resource Locator)

- 통합자 자원 지시자

- 네트워크 상에서 자원이 어디 있는지를 알려주기 위한 규약(정형화된 리소스 위치표시)



### 1-2. URI (Uniform Resource Identifier)

- 통합자 자원 식별자

- 인터넷에 있는 자원을 나타내는 유일한 주소

![url의 모습](./images/url.png)



### 1-3. HTTP 요청 메시지

| 구분                     | 비고                                                         |
| ------------------------ | ------------------------------------------------------------ |
| 시작줄 <br>(요청 메시지) | GET/posts/3                                                  |
| 헤더 <br>(요청 헤더)     |                                                              |
| 본문                     | POST 요청의 경우 본문의 내용이 포함 될 수 있으며, 일반적으로 HTML 폼과 연계되어 사용된다. |



### 1-4. HTTP 응답 메시지
| 구분                    | 비고                                                         |
| ----------------------- | ------------------------------------------------------------ |
| 상태줄<br>(요청 메시지) | 프로토콜 버전, 상태 코드 <br>HTTP/1.1 404 Not Found.         |
| 헤더 <br>(응답 헤더)    | Date, Server, Set-Cookie...                                  |
| 본문                    | 모든 응답이 본문을 갖지는 않으나 단일 파일/단일 리소스 본문 혹은 다중 리소스 본문 |



### 1-5. HTTP 메서드

| 구분      | 비고   |
| --------- | ------ |
| GET       | 지정 리소스의 표시를 요청하며, 오직 데이터를 받기만 함 |
| POST      | 클라이언트 데이터를 서버로 보냄|
| PUT/PATCH | 서버로 보낸 데이터를 저장/지정 리소스의 부분만을 수정       |
| DELETE    | 지정 리소스를 삭제       |



## 2. REST API(Representational State Transfer)

자원(URI), 행위(HTTP Verb), 표현(Representations)으로 구성된다.

### 2-1. REST 특징

| 구분                                   | 비고                                                         |
| -------------------------------------- | ------------------------------------------------------------ |
| Uniform Interface                      | 지정한 리소스에 대한 조작을 통일되고 한정적인 인터페이스로 활용 |
| 무상태성<br>(Stateless)                | 무상태성의 성격을 가짐.<br>세션 정보나 구키를 별도로 저장하지 않고 단순하게 요청만을 처리한다. |
| 캐쉬가능<br>(Cacheable)                | HTTP의 캐시 기능이 적용 가능하다.                            |
| 자체표현구조<br>(Self-descriptiveness) | REST API 메시지만 보고도 이를 쉽게 이해할 수 있는 자체 표현 구조로 되어 있다. |
| Client-Server 구조                     | 클라이언트 서버에서 개발할 내용이 명확하고 의존              |
| 계층형 구조                            | REST 서버는 다중 계층으로 구성될 수 있다.                    |



### 2-2. REST 중심 규칙

1. **URI는 정보의 자원을 표현**해야 한다.
2. 자원에 대한  **행위는 HTTP Method로 표현**한다.
3.  /는 계층 관계를 나타내는데 사용되며, 마지막에는 사용하지 않는다.
4. 밑줄 대신에 하이픈을 사용한다.

#### [1]

>[잘못된 요청] GET / users /show /1
>
>이유 : 불필요한 정보가 포함됨(URI에는 행위는 표현하지 않고 자원 표현에 중점을 둬야 한다.)
>
>[올바른 요청] **GET /users/1**
#### [2]
> [잘못된 요청] GET / users /delete /1
>
> 이유 : 불필요한 정보가 포함됨
>
> [올바른 요청] **DELETE /users/1**
#### [3]
>[잘못된 요청] GET / users /create /1
>
>이유 : GET 메서드는 적절하지 않다.
>
>[올바른 요청] **POST /users/1**



#### [추가] HTTP 메서드와 CRUD 조작 예시

![잘 만들어진 RESTfull API](./images/restful.png)



### 2-3. RESTful on Django

```shell
$python managy.py show_urls
```

