# ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì´ë²¤íŠ¸

> ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëŒ€ë¶€ë¶„ì˜ DOM ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì™€ Timer í•¨ìˆ˜(setTimeout, setInterval), Ajax ìš”ì²­ì€ ë¹„ë™ê¸°ì‹ ì²˜ë¦¬ ëª¨ë¸ë¡œ ë™ì‘í•œë‹¤.



**ë¸Œë¼ìš°ì €ì—ì„œì˜ ì´ë²¤íŠ¸ë€** ì‚¬ìš©ìê°€ ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜, ì›¹ í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆì„ ë•Œì™€ ê°™ì´ **DOM ìš”ì†Œì™€ ê´€ë ¨**ì´ ìˆë‹¤.

ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ëŠ” ì‹œì ì´ë‚˜ ìˆœì„œë¥¼ ì‚¬ì „ì— ì¸ì§€í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ì¼ë°˜ì ì¸ ì œì–´ íë¦„ê³¼ëŠ” ë‹¤ë¥¸ ì ‘ê·¼ ë°©ì‹ì´ í•„ìš”í•˜ë‹¤. ì¦‰, ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ëˆ„êµ°ê°€ ì´ë¥¼ ê°ì§€í•  ìˆ˜ ìˆì–´ì•¼ í•˜ë©° ê·¸ì— ëŒ€ì‘í•˜ëŠ” ì²˜ë¦¬ë¥¼ í˜¸ì¶œí•´ ì£¼ì–´ì•¼ í•œë‹¤.

**ë¸Œë¼ìš°ì €ëŠ” ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•  ìˆ˜ ìˆìœ¼ë©° ì´ë²¤íŠ¸ ë°œìƒ ì‹œì—ëŠ” í†µì§€í•´ ì¤€ë‹¤. ì´ ê³¼ì •ì„ í†µí•´ ì‚¬ìš©ìì™€ ì›¹í˜ì´ì§€ëŠ” ìƒí˜¸ì‘ìš©ì´ ê°€ëŠ¥í•´ì§„ë‹¤.**



## I. ì´ë²¤íŠ¸ ë£¨í”„(Event Loop)ì™€ ë™ì‹œì„±(Concurrency)

ë¸Œë¼ìš°ì €ëŠ” ë‹¨ì¼ ì“°ë ˆë“œ(single-thread)ì—ì„œ ì´ë²¤íŠ¸ ë“œë¦¬ë¸(event-driven)ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.

ì“°ë ˆë“œê°€ í•˜ë‚˜ë¿ì´ë¯€ë¡œ í•œë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤. ê·¸ëŸ¬ë‚˜ ì‹¤ì œë¡œ ë™ì‘í•˜ëŠ” ì›¹ì‚¬ì´íŠ¸ëŠ” ë™ì‹œì— ì—¬ëŸ¬ê°œì˜ ì¼ë“¤ì´ ì§„í–‰ë˜ê³  ìˆëŠ” ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤. ì´ì²˜ëŸ¼ **ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë™ì‹œì„±(Concurrency)ì„ ì§€ì›í•˜ëŠ” ê²ƒì´ ë°”ë¡œ ì´ë²¤íŠ¸ ë£¨í”„(Event Loop)ì´ë‹¤.**

![ì´ë²¤íŠ¸ ë£¨í”„](./images/event_loop.png)

`Call stack`

- ì‘ì—…ì´ ìš”ì²­ë˜ë©´(í•¨ìˆ˜ í˜¸ì¶œ ì‹œ) ìš”ì²­ëœ ì‘ì—…ì€ ìˆœì°¨ì ìœ¼ë¡œ Call stackì— ìŒ“ì´ê²Œ ë˜ê³  ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤. 
- ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¨ í•œê°œì˜ Call stackì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ taskê°€ ì¢…ë£Œí•˜ê¸° ì „ê¹Œì§€ëŠ” ë‹¤ë¥¸ ì–´ë–¤ taskë„ ìˆ˜í–‰ë  ìˆ˜ ì—†ë‹¤.

`Heap`

- ë™ì ìœ¼ë¡œ ìƒì„±ëœ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ê°€ í• ë‹¹ë˜ëŠ” ì˜ì—­



ì´ì™€ ê°™ì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ë‹¨ìˆœì´ ì‘ì—…ì´ ìš”ì²­ë˜ë©´ `Call stack`ì„ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ëœ ì‘ì—…ì„ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•œë‹¤. ì•ì„œ ì–¸ê¸‰ëœ ë™ì‹œì„±ì„ ì§€ì›í•˜ê¸° ìœ„í•œ ë¹„ë™ê¸° ì²˜ë¦¬ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì„ êµ¬ë™í•˜ëŠ” ë¸Œë¼ìš°ì €ê°€ ë‹´ë‹¹í•œë‹¤.



`Event Queue(Task Queue)`

- ë¹„ë™ê¸° ì²˜ë¦¬ í•¨ìˆ˜ì˜ ì½œë°± í•¨ìˆ˜, ë¹„ë™ê¸°ì‹ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬, Timer í•¨ìˆ˜(setTimeout(), setInterval())ì˜ ì½œë°± í•¨ìˆ˜ê°€ ë³´ê´€ë˜ëŠ” ì˜ì—­ìœ¼ë¡œ ì´ë²¤íŠ¸ ë£¨í”„ì— ì˜í•´ íŠ¹ì • ì‹œì (`Call stack`ì´ ë¹„ì–´ì¡Œì„ ë•Œ)ì— ìˆœì°¨ì ìœ¼ë¡œ `Call stack`ìœ¼ë¡œ ì´ë™ë˜ì–´ ì‹¤í–‰ëœë‹¤.

`Event Loop(ì´ë²¤íŠ¸ ë£¨í”„)`

- `Call stack` ë‚´ì— í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì‘ì—…ì´ ìˆëŠ”ì§€, `Event Queue`ì—ë„ ì‘ì—…ì´ ìˆëŠ”ì§€ ë°˜ë³µí•˜ì—¬ í™•ì¸í•œë‹¤.
- ë§Œì•½, `Call stack` ì´ ë¹„ì–´ ìˆë‹¤ë©´ `Event Queue`ì˜ ì‘ì—…ì„ `Call stack` ìœ¼ë¡œ ì´ë™ì‹œí‚¤ê³  ì‹¤í–‰í•œë‹¤.



#### ì½”ë“œë¡œ ì´í•´í•˜ì!

```javascript
function func1() {
  console.log('func1');
  func2();	
}

function func2() {
  setTimeout(function () {
    console.log('func2');
  }, 0);

  func3();
}

function func3() {
  console.log('func3');
}

func1();
/*
func1
func3
func2
*/
```

1. `call stack` func1()ê°€ ìŒ“ì¸ë‹¤.
   - **console.log('func1') ì‹¤í–‰**
2. `call stack` func2()ê°€ ìŒ“ì¸ë‹¤.
3. func2()ì˜ setTimeout()í•¨ìˆ˜ì˜ ì½œë°±í•¨ìˆ˜ëŠ” ì¦‰ì‹œ ì‹¤í–‰ë˜ì§€ ì•Šê³  ì§€ì •ëœ ëŒ€ê¸° ì‹œê°„ë§Œí¼ ê¸°ë‹¤ë ¤ì•¼ í•œë‹¤.
   - íŠ¹ì • ì‹œê°„ì´ ì¢…ë£Œëœ ë’¤, setTimeout()í•¨ìˆ˜ì˜ ì½œë°±í•¨ìˆ˜ëŠ” `Event Queue(Task Queue)`ì— ìŒ“ì¸ë‹¤.
4. `call stack` func3()ê°€ ìŒ“ì¸ë‹¤.
   - **console.log('func3') ì‹¤í–‰**
5. `call stack` ì—ì„œ ì‹¤í–‰ì˜ ì—­ìˆœìœ¼ë¡œ í•¨ìˆ˜ê°€ ì¢…ë£Œë˜ê³  `call stack`ì„ ë¹ ì ¸ë‚˜ì˜¨ë‹¤.
6. `call stack`ì´ ë¹„ì–´ì ¸ìˆìœ¼ë©´, `Event Queue(Task Queue)`ì—ì„œ ì½œë°±í•¨ìˆ˜ë¥¼ í•˜ë‚˜ì”© ë¹¼ì„œ `call stack` ì— ë„£ê³  ì‹¤í–‰í•œë‹¤.
   - **console.log('func2') ì‹¤í–‰**



> ğŸ’¡ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë„ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ë™ì‘í•œë‹¤. ì¦‰, ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ í•´ë‹¹ ì½œë°±í•¨ìˆ˜ê°€  `Event Queue(Task Queue)`ì— ì €ì¥ë˜ê³  `call stack` ê°€ ë¹„ì–´ìˆì„ ë•Œ, `call stack` ë¡œ ì´ë™ë˜ì–´ ì‹¤í–‰ëœë‹¤.

> [ì´ë²¤íŠ¸ ì¢…ë¥˜ëŠ” í´ë¦­!](https://developer.mozilla.org/en-US/docs/Web/Events)



## II.  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡

ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ ë™ì‘í•  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì´ë²¤íŠ¸ì— ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ 3ê°€ì§€ì´ë‹¤.

> ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹° : `on`, `onclick`, `keyup` ë“±



### 1. ì¸ë¼ì¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë°©ì‹

html ê°ì²´ ìš”ì†Œì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì§ì ‘ ë“±ë¡í•˜ëŠ” ë°©ì‹

```html
<!DOCTYPE html>
<html>
<body>
  <button onclick="myHandler()">Click me</button>
  <script>
    function myHandler() {
      alert('Button clicked!');
    }
  </script>
</body>
</html>
```

- í•œë²ˆì— ì—¬ëŸ¬ ê°œì˜ í•¨ìˆ˜ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

  ```html
  <!DOCTYPE html>
  <html>
  <body>
    <button onclick="myHandler1(); myHandler2();">Click me</button>
    <script>
      function myHandler1() {
        alert('myHandler1');
      }
      function myHandler2() {
        alert('myHandler2');
      }
    </script>
  </body>
  </html>
  ```

- ì‹¤ì œë¡œëŠ” ì•„ë˜ì²˜ëŸ¼ ë³€ê²½ëœë‹¤.

  ```javascript
  // <button onclick="myHandler1(); myHandler2();">Click me</button>
  onclick = function(event){
    myHandler1()
    myHandler2()
  }
  ```



### 2. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹° ë°©ì‹

ì¸ë¼ì¸ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë°©ì‹ì²˜ëŸ¼ HTMLê³¼ Javascriptê°€ ë’¤ì„ì´ëŠ” ë¬¸ì œëŠ” í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ì‹ì´ë‹¤. í•˜ì§€ë§Œ **ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹°ì— í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë§Œì„ ë°”ì¸ë”©í•  ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì **ì´ ìˆë‹¤.

```html
<!DOCTYPE html>
<html>
<body>
  <button class="btn">Click me</button>
  <script>
    const btn = document.querySelector('.btn');

    // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í”„ë¡œí¼í‹° ë°©ì‹ì€ ì´ë²¤íŠ¸ì— í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë§Œì„ ë°”ì¸ë”©í•  ìˆ˜ ìˆë‹¤
    // ì²«ë²ˆì§¸ ë°”ì¸ë”©ëœ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ => ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤!!!!
    btn.onclick = function () {
      alert('â‘ ');
    };

    // ë‘ë²ˆì§¸ ë°”ì¸ë”©ëœ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    btn.onclick = function () {
      alert('â‘¡');
    };

  </script>
</body>
</html>
<!-- 
â‘¡
-->
```



### 3. addEventListener ë©”ì†Œë“œ ë°©ì‹ğŸ’¡

`addEventListener` ë©”ì†Œë“œë¥¼ ì´ìš©í•˜ì—¬ ëŒ€ìƒ DOM ìš”ì†Œì— ì´ë²¤íŠ¸ë¥¼ ë°”ì¸ë”©í•˜ê³  í•´ë‹¹ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ ì‹¤í–‰ë  ì½œë°± í•¨ìˆ˜(ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬)ë¥¼ ì§€ì •í•œë‹¤.

- **í•˜ë‚˜ì˜ ì´ë²¤íŠ¸ì— ì—¬ëŸ¬ ê°œì˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì¶”ê°€**í•  ìˆ˜ ìˆë‹¤.
- **ìº¡ì²˜ë§ê³¼ ë²„ë¸”ë§ì„ ì§€ì›í•œë‹¤.**
- HTMLë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë“  DOM ìš”ì†Œì— ëŒ€í•´ ë™ì‘í•œë‹¤.

```html
<!DOCTYPE html>
<html>
<body>
  <button class="btn">Click me</button>
  <script>
    const btn = document.querySelector('.btn');

    // ì²«ë²ˆì§¸ ë°”ì¸ë”©ëœ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    btn.addEventListener('click', function () {
      alert('â‘ ');
    })
    
    // ë‘ë²ˆì§¸ ë°”ì¸ë”©ëœ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
    btn.addEventListener('click', function () {
      alert('â‘¡');
    })
  </script>
</body>
</html>
<!-- 
â‘ 
â‘¡
-->
```

>  `addEventListener` ëŠ” ì´ë²¤íŠ¸ ì „íŒŒë¥¼ ì½ì„ ìˆ˜ ìˆë‹¤. ì„¸ë²ˆì§¸ ì¸ìë¥¼ trueë¡œ ì„¤ì •í•˜ë©´ ìº¡ì²˜ë§ìœ¼ë¡œ ì „íŒŒë˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ìºì¹˜í•˜ê³  false(default)ë¡œ ì„¤ì •í•˜ë©´ ë²„ë¸”ë§ ì „íŒŒ ì´ë²¤íŠ¸ë¥¼ ì½ëŠ”ë‹¤.



## III. ì´ë²¤íŠ¸ì˜ íë¦„ğŸ’¡

ê³„ì¸µì  êµ¬ì¡°ì— í¬í•¨ë˜ì–´ ìˆëŠ” HTML ìš”ì†Œì— ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ ì—°ì‡„ì  ë°˜ì‘ì´ ì¼ì–´ë‚œë‹¤. ì¦‰, ì´ë²¤íŠ¸ê°€ ì „íŒŒ(Event Propagation)ë˜ëŠ”ë° ì „íŒŒ ë°©í–¥ì— ë”°ë¼ `ë²„ë¸”ë§(Event Bubbling)`ê³¼ `ìº¡ì²˜ë§(Event Capturing)`ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.

1. `ë²„ë¸”ë§(Event Bubbling)` : ìì‹ìš”ì†Œ => ë¶€ëª¨ìš”ì†Œ

2. `ìº¡ì²˜ë§(Event Capturing)` : ë¶€ëª¨ìš”ì†Œ => ìì‹ìš”ì†Œ

    

*ì£¼ì˜í•  ì ì€ ë²„ë¸”ë§ê³¼ ìº¡ì²˜ë§ì€ ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ì¼ì–´ë‚˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **ìº¡ì²˜ë§ë¶€í„° ì‹œì‘í•´ì„œ ë²„ë¸”ë§ìœ¼ë¡œ ì¢…ë£Œ**ëœë‹¤. ì¦‰, ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆì„ ë•Œ ìº¡ì²˜ë§ê³¼ ë²„ë¸”ë§ì€ ìˆœì°¨ì ìœ¼ë¡œ ë°œìƒí•œë‹¤.*

![ì´ë²¤íŠ¸ ì „íŒŒ](./images/event_propagation.png)



### 1. ì´ë²¤íŠ¸ ë²„ë¸”ë§

ìì‹ìš”ì†Œì—ì„œ ë¶€ëª¨ìš”ì†Œë¡œ ì´ë²¤íŠ¸ê°€ ì „íŒŒë˜ëŠ” ê²ƒ

```html
<!DOCTYPE html>
<html>
<head>
  <style>
    html, body { height: 100%; }
  </style>
<body>
  <p>ë²„ë¸”ë§ ì´ë²¤íŠ¸ 
    <button>ë²„íŠ¼</button>
  </p>
  <script>
    const body = document.querySelector('body');
    const p = document.querySelector('p');
    const button = document.querySelector('button');
    
    // body íƒœê·¸ë¡œ ë²„ë¸”ë§ ë˜ëŠ” ê²ƒì„ íƒì§€í•œë‹¤.
    body.addEventListener('click',function(){
      console.log('body')
    })
    // p íƒœê·¸ë¡œ ë²„ë¸”ë§ ë˜ëŠ” ê²ƒì„ íƒì§€í•œë‹¤.
		p.addEventListener('click',function(){
      console.log('p')
    })
    // button íƒœê·¸ë¡œ ë²„ë¸”ë§ ë˜ëŠ” ê²ƒì„ íƒì§€í•œë‹¤.
		button.addEventListener('click',function(){
      console.log('button')
    })
  </script>
</body>
</html>
<!-- 
[1] button í´ë¦­
button
p
body

[2] p í´ë¦­
p
body

[3] body í´ë¦­
body
-->
```



### 2. ì´ë²¤íŠ¸ ìº¡ì²˜ë§

ë¶€ëª¨ì—ì„œ ìì‹ìœ¼ë¡œ ì´ë²¤íŠ¸ê°€ ì „íŒŒë˜ëŠ” ê²ƒ

```html
<!DOCTYPE html>
<html>
<head>
  <style>
    html, body { height: 100%; }
  </style>
<body>
  <p>ë²„ë¸”ë§ ì´ë²¤íŠ¸ 
    <button>ë²„íŠ¼</button>
  </p>
  <script>
    const body = document.querySelector('body');
    const p = document.querySelector('p');
    const button = document.querySelector('button');
    
    // body íƒœê·¸ë¡œ ìº¡ì²˜ë§ ë˜ëŠ” ê²ƒì„ íƒì§€í•œë‹¤.
    body.addEventListener('click',function(){
      console.log('body')
    }, true)
    // p íƒœê·¸ë¡œ ìº¡ì²˜ë§ ë˜ëŠ” ê²ƒì„ íƒì§€í•œë‹¤.
		p.addEventListener('click',function(){
      console.log('p')
    }, true)
    // button íƒœê·¸ë¡œ ìº¡ì²˜ë§ ë˜ëŠ” ê²ƒì„ íƒì§€í•œë‹¤.
		button.addEventListener('click',function(){
      console.log('button')
    }, true)
  </script>
</body>
</html>
<!-- 
[1] button í´ë¦­
button

[2] p í´ë¦­
p
button

[3] body í´ë¦­
body
p
button
-->
```



>**ë²„ë¸”ë§ê³¼ ìº¡ì²˜ë§ì´ í˜¼ìš©ë˜ëŠ” ê²½ìš°**
>
>í•­ìƒ ë¶€ëª¨ìš”ì†Œì˜ ìº¡ì²˜ë§ => ìì‹ìš”ì†Œì˜ ë²„ë¸”ë§ ì „íŒŒ ìˆœìœ¼ë¡œ ì§„í–‰ëœë‹¤.
>
>```html
><!DOCTYPE html>
><html>
><head>
><style>
>html, body { height: 100%; }
></style>
><body>
><p>ë²„ë¸”ë§ ì´ë²¤íŠ¸ 
><button>ë²„íŠ¼</button>
></p>
><script>
>const body = document.querySelector('body');
>const p = document.querySelector('p');
>const button = document.querySelector('button');
>
>		// ë²„ë¸”ë§
>body.addEventListener('click',function(){
> console.log('body ë²„ë¸”ë§')
>})
>
>// ìº¡ì²˜ë§
>		p.addEventListener('click',function(){
> console.log('p ìº¡ì²˜ë§')
>}, true)
>
>// ë²„ë¸”ë§
>		button.addEventListener('click',function(){
> console.log('button ë²„ë¸”ë§')
>})
></script>
></body>
></html>
><!-- 
>[1] button í´ë¦­
>p ìº¡ì²˜ë§
>button ë²„ë¸”ë§
>body ë²„ë¸”ë§
>
>[2] p í´ë¦­
>p ìº¡ì²˜ë§
>body ë²„ë¸”ë§
>
>[3] body í´ë¦­
>body ë²„ë¸”ë§
>-->
>```



## IV. Event ê°ì²´

event ê°ì²´ëŠ” ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ ìš”ì†Œì™€ ë°œìƒí•œ ì´ë²¤íŠ¸ì— ëŒ€í•œ ìœ ìš©í•œ ì •ë³´ë¥¼ ì œê³µí•œë‹¤. ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ **event ê°ì²´ëŠ” ë™ì ìœ¼ë¡œ ìƒì„±ë˜ë©°, ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ì¸ìë¡œ ì „ë‹¬**ëœë‹¤.

```html
<!DOCTYPE html>
<html>
<body>
  <p>í´ë¦­í•˜ì„¸ìš”!</p>
  <script>
  const p = document.querySelector('p');
  function printEvent(e) { // e: event object
    console.log(e)	// ì´ë²¤íŠ¸ ê°ì²´ê°€ ì¶œë ¥ëœë‹¤.
  }
  p.addEventListener('click', printEvent)
  </script>
</body>
</html>
```

ì´ë²¤íŠ¸ ê°ì²´ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì— ì•”ë¬µì ìœ¼ë¡œ ì „ë‹¬ëœë‹¤. **ê·¸ë˜ì„œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì„ ì–¸í•  ë•Œ, event ê°ì²´ë¥¼ ì „ë‹¬ë°›ì„ ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•˜ì—¬ì•¼ í•œë‹¤.**

```html
<!DOCTYPE html>
<html>
<body>
  <p>í´ë¦­í•˜ì„¸ìš”!</p>
  <el class="message"></el>
  <script>
  const p = document.querySelector('p')
  const massage = document.querySelector('el.message')
  
  function printEvent(e, msg) {
    msg.innerHTML = e
  }
  p.addEventListener('click',function(e){
      printEvent(e, massage)
  })
  </script>
</body>
</html>
```



### A. Event Property

#### Event.target

- ì‹¤ì œë¡œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ ìš”ì†Œë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- `this`ëŠ” ì´ë²¤íŠ¸ê°€ ë°”ì¸ë”©ëœ ìš”ì†Œë¥¼ ê°€ë¦¬í‚¤ë©°, `target`ì€ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ ìš”ì†Œë¥¼ ê°€ë¦¬í‚¨ë‹¤. ì¦‰, `ì´ë²¤íŠ¸ ìœ„ì„`ì„ ì‚¬ìš©í–ˆì„ ë•Œ ë‘ ìš”ì†Œì˜ ê°’ì´ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤.



#### Event.currentTarget

- ì´ë²¤íŠ¸ì— ë°”ì¸ë”©ëœ DOM ìš”ì†Œë¥¼ ê°€ë¦¬í‚¨ë‹¤. ì¦‰, `addEventListener` ì•ì— ê¸°ìˆ ëœ ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
- `addEventListener`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ë°”ì¸ë”©í–ˆì„ ë•Œ, `this`ì™€ `currentTarget`ì˜ ê°’ì€ í•­ìƒ ì¼ì¹˜í•œë‹¤.



#### Event.type

- ë°œìƒí•œ ì´ë²¤íŠ¸ì˜ ì¢…ë¥˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¬¸ìì—´ì„ ë°˜í™˜í•œë‹¤.



#### Event.cancelable

- ìš”ì†Œì˜ ê¸°ë³¸ ë™ì‘ì„ ì·¨ì†Œì‹œí‚¬ ìˆ˜ ìˆëŠ”ì§€ ì—¬ë¶€(true/false)ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.



#### Event.eventPhaseğŸ’¡

- ì´ë²¤íŠ¸ì˜ íë¦„(event flow)ìƒì—ì„œ ì–´ëŠ ë‹¨ê³„ì— ìˆëŠ”ì§€ë¥¼ ë°˜í™˜í•œë‹¤.

| ë°˜í™˜ê°’ | ì˜ë¯¸        |
| ------ | ----------- |
| 0      | ì´ë²¤íŠ¸ ì—†ìŒ |
| 1      | ìº¡ì²˜ë§      |
| 2      | íƒ€ê¹ƒ        |
| 3      | ë²„ë¸”ë§      |



## V. ì´ë²¤íŠ¸ ìœ„ì„ğŸ’¡

`ì´ë²¤íŠ¸ ìœ„ì„`ì€ **ë‹¤ìˆ˜ì˜ ìì‹ ìš”ì†Œì— ê°ê° ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë°”ì¸ë”©í•˜ëŠ” ëŒ€ì‹  í•˜ë‚˜ì˜ ë¶€ëª¨ ìš”ì†Œì— ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë°”ì¸ë”©í•˜ëŠ” ë°©ë²•**ì´ë‹¤. 

ì´ë²¤íŠ¸ê°€ í• ë‹¹ë  ìì‹ ìš”ì†Œì˜ ê°œìˆ˜ê°€ ë§ê±°ë‚˜, ë™ì ìœ¼ë¡œ ì¶”ê°€ë˜ëŠ” ìš”ì†Œì— ì´ë²¤íŠ¸ë¥¼ í• ë‹¹í•´ì•¼í•  ë•Œ ìœ ìš©í•˜ë‹¤. ì´ëŠ” ì´ë²¤íŠ¸ì˜ íë¥´ë¯¸ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ ìš”ì†Œì˜ ë¶€ëª¨ ìš”ì†Œì—ë„ ì˜í–¥(`ë²„ë¸”ë§`)ì„ ë¯¸ì¹˜ê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.

```html
<ul id="post-list">
  <li id="post-1">
    Item 1
    <p>one</p>
  </li>
  <li id="post-2">Item 2</li>
  <li id="post-3">Item 3</li>
  <li id="post-4">Item 4</li>
  <li id="post-5">Item 5</li>
  <li id="post-6">Item 6</li>
</ul>
```

```javascript
function printId() {
  console.log(this.id);
}

document.querySelector('#post-1').addEventListener('click', printId);
document.querySelector('#post-2').addEventListener('click', printId);
document.querySelector('#post-3').addEventListener('click', printId);
document.querySelector('#post-4').addEventListener('click', printId);
document.querySelector('#post-5').addEventListener('click', printId);
document.querySelector('#post-6').addEventListener('click', printId);
```



**[ë¬¸ì œ]** ì´ë²¤íŠ¸ ìœ„ì„ì„ ì‚¬ìš©í•˜ì—¬ ìœ„ì™€ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì‹œì˜¤.

```javascript
const parent = document.querySelector('ul#post-list')

parent.addEventListener('click', function(e){
 	// e.target : ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¨ ìš”ì†Œ
  
  // parentì˜ ìì‹ì¸ pì—ì„œ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ ìˆ˜ì •
  if(e.target.nodeName === 'LI'){
  	console.log(e.target.id)
  }
})
```



## VI. ê¸°ë³¸ ë™ì‘ì˜ ë³€ê²½



#### Event.preventDefault()

- ìš”ì†Œê°€ ê°€ì§„ ê¸°ë³¸ ë™ì‘ì„ ì¤‘ë‹¨ì‹œí‚¨ë‹¤.
- aíƒœê·¸ëŠ” hrefì— ì •ì˜ëœ ì£¼ì†Œë¡œ í˜ì´ì§€ë¥¼ ì´ë™ì‹œí‚¤ëŠ”ë°, `preventDefault()`ë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë¬´ëŸ° ì¼ë„ ì¼ì–´ë‚˜ì§€ ì•ŠëŠ”ë‹¤.



#### Event.stopPropagation()ğŸ’¡

- ì–´ëŠ í•œ ìš”ì†Œë¥¼ ì´ìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•œ í›„ **ì´ë²¤íŠ¸ê°€ ë¶€ëª¨ ìš”ì†Œë¡œ ì „íŒŒë˜ëŠ” ê²ƒì„ ì¤‘ë‹¨í•˜ê¸° ìœ„í•œ ë©”ì†Œë“œ**ì´ë‹¤. ë¶€ëª¨ ìš”ì†Œì— ë™ì¼í•œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ ë“±ë¡ëœ ê²½ìš°ì— ì‚¬ìš©í•œë‹¤.
- ìº¡ì²˜ë§ì„ ë§‰ìœ¼ë©´ ì´ë²¤íŠ¸ê°€ ë°œìƒí•œ ìš”ì†Œì˜ íƒ€ê²Ÿ ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ì§€ ëª»í•œë‹¤.

```html
<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <p>
    ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì´ë²¤íŠ¸ ì „íŒŒë¥¼ ì¤‘ë‹¨í•œë‹¤. 
    <button>ë²„íŠ¼</button>
  </p>
  <script>
    const body = document.querySelector('body');
    const para = document.querySelector('p');
    const button = document.querySelector('button');

    // ë²„ë¸”ë§
    body.addEventListener('click', function () {
      console.log('body');
    });

    // ë²„ë¸”ë§
    para.addEventListener('click', function () {
      console.log('paragraph');
    });

    // ë²„ë¸”ë§
    button.addEventListener('click', function (event) {
      console.log('button');

      // ì´ë²¤íŠ¸ ì „íŒŒë¥¼ ì¤‘ë‹¨í•œë‹¤.
      event.stopPropagation();
      console.log('ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ì§€');
    });
  </script>
</body>
</html>
<!-- 
[1] button í´ë¦­
button
ì´ë²¤íŠ¸ ì „íŒŒ ì¤‘ì§€

[2] p í´ë¦­
p
body

[3] body í´ë¦­
body
-->
```



#### preventDefault + stopPropagation ê°™ì€ íš¨ê³¼

- ê¸°ë³¸ ë™ì‘ì˜ ì¤‘ë‹¨ê³¼ ë²„ë¸”ë§ ë˜ëŠ” ìº¡ì²˜ë§ì„ ì¤‘ë‹¨ì„ ì‹¤ì‹œí•˜ëŠ” ë°©ë²•ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ê°€ ì´ë²¤íŠ¸ì—  `return false`í•˜ê¸°ë§Œ í•˜ë©´ ëœë‹¤.

```html
<!DOCTYPE html>
<html>
<body>
  <a href="http://www.google.com" onclick='return handleEvent()'>go</a>
  <script>
  function handleEvent() {
    return false;
  }
  </script>
</body>
</html>
```

